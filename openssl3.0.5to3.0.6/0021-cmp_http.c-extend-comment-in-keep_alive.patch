From 378fcde13edb451881b8d8d36a7e31f785a4f0ed Mon Sep 17 00:00:00 2001
From: "Dr. David von Oheimb" <David.von.Oheimb@siemens.com>
Date: Fri, 1 Jul 2022 20:25:55 +0200
Subject: [PATCH 021/209] cmp_http.c: extend comment in keep_alive()

Reviewed-by: Tomas Mraz <tomas@openssl.org>
Reviewed-by: Hugo Landau <hlandau@openssl.org>
Reviewed-by: David von Oheimb <david.von.oheimb@siemens.com>
(Merged from https://github.com/openssl/openssl/pull/18702)

(cherry picked from commit 93d9d6097685dc29e654db15c091c550aef16d5b)
---
 crypto/cmp/cmp_http.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/crypto/cmp/cmp_http.c b/crypto/cmp/cmp_http.c
index 6ac4212db7..9e8b0c4dd0 100644
--- a/crypto/cmp/cmp_http.c
+++ b/crypto/cmp/cmp_http.c
@@ -31,7 +31,10 @@
 static int keep_alive(int keep_alive, int body_type)
 {
     if (keep_alive != 0
-        /* Ask for persistent connection only if may need more round trips */
+        /*
+         * Ask for persistent connection only if may need more round trips.
+         * Do so even with disableConfirm because polling might be needed.
+         */
             && body_type != OSSL_CMP_PKIBODY_IR
             && body_type != OSSL_CMP_PKIBODY_CR
             && body_type != OSSL_CMP_PKIBODY_P10CR
-- 
2.34.1

