From 93e5c63ee7a7ef627d234558e850ff962e5dbc71 Mon Sep 17 00:00:00 2001
From: Pauli <pauli@openssl.org>
Date: Wed, 17 Aug 2022 08:34:50 +1000
Subject: [PATCH 111/209] Avoid using tsan_add

Reviewed-by: Tomas Mraz <tomas@openssl.org>
Reviewed-by: Matt Caswell <matt@openssl.org>
(Merged from https://github.com/openssl/openssl/pull/19009)
---
 crypto/property/property.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/crypto/property/property.c b/crypto/property/property.c
index 3469768ca6..2c92cb5e50 100644
--- a/crypto/property/property.c
+++ b/crypto/property/property.c
@@ -673,7 +673,7 @@ static void ossl_method_cache_flush_some(OSSL_METHOD_STORE *store)
     store->cache_nelem = state.nelem;
     /* Without a timer, update the global seed */
     if (state.using_global_seed)
-        tsan_add(&global_seed, state.seed);
+        tsan_store(&global_seed, state.seed);
 }
 
 int ossl_method_store_cache_get(OSSL_METHOD_STORE *store, OSSL_PROVIDER *prov,
-- 
2.34.1

